<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Devine le film â€“ Animateur</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>

<style>
body {
  background:#111;
  color:#fff;
  font-family:Arial, sans-serif;
  text-align:center;
  margin:0;
  padding:20px;
}

.qr-box {
  width:200px;              /* ðŸ‘ˆ FIXE = STABLE */
  margin:0 auto 25px auto;  /* ðŸ‘ˆ CENTRÃ‰ */
}

#qrcode {
  width:160px;
  height:160px;
  margin:0 auto;
}

.player {
  padding:6px;
  border-bottom:1px solid #333;
}
</style>
</head>

<body>

<h1>ðŸŽ¬ Devine le film</h1>

<div class="qr-box">
  <div>ðŸ“± Scanne pour jouer</div>
  <div id="qrcode"></div>
</div>

<h2>ðŸ‘¥ Joueurs connectÃ©s</h2>
<div id="players">Aucun joueur</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

/* ðŸ”¥ TA CONFIG FIREBASE */
const firebaseConfig = {
  apiKey: "TON_API_KEY",
  authDomain: "TON_AUTH_DOMAIN",
  projectId: "TON_PROJECT_ID",
  storageBucket: "TON_STORAGE_BUCKET",
  messagingSenderId: "TON_SENDER_ID",
  appId: "TON_APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* QR CODE */
new QRCode(document.getElementById("qrcode"), {
  text: new URL("joueurs.html", window.location.href).href,
  width:160,
  height:160
});

/* LISTE JOUEURS */
const playersDiv = document.getElementById("players");

onSnapshot(collection(db, "players"), snapshot => {
  playersDiv.innerHTML = "";
  if (snapshot.empty) {
    playersDiv.innerText = "Aucun joueur";
    return;
  }
  snapshot.forEach(doc => {
    const p = doc.data();
    const d = document.createElement("div");
    d.className = "player";
    d.textContent = p.pseudo;
    playersDiv.appendChild(d);
  });
});
</script>

</body>
</html>
