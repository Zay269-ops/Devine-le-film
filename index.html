<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Devine le film â€“ Animateur ğŸ¬</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#111111">

<script src="films.js"></script>
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>

<style>
body {
  background:#111;
  color:white;
  font-family:Arial, sans-serif;
  text-align:center;
  margin:0;
  padding:20px;
}
h1 { margin:15px 0; }
#emojis {
  font-size:64px;
  margin:30px 0;
}
#answer {
  font-size:28px;
  color:#4CAF50;
  display:none;
  margin-bottom:20px;
}
#timer {
  font-size:32px;
  color:#ff5252;
  margin-bottom:20px;
}
button {
  width:90%;
  max-width:340px;
  font-size:18px;
  padding:15px;
  margin:8px auto;
  display:block;
  border:none;
  border-radius:12px;
  cursor:pointer;
}
button:active { transform:scale(0.97); }
.qr {
  display:flex;
  flex-direction:column;
  align-items:center;
  margin-bottom:20px;
}
</style>
</head>

<body>

<div class="qr">
  <div>ğŸ“± Scanne pour jouer</div>
  <div id="qrcode"></div>
</div>

<h1>ğŸ¬ Devine le film</h1>

<div id="emojis">ğŸ¥â“</div>
<div id="answer">Clique sur Â« Question suivante Â»</div>
<div id="timer">â±ï¸ 30</div>

<button onclick="nextFilm()">ğŸ² Question suivante</button>
<button onclick="reveal()">ğŸ‘ï¸ RÃ©vÃ©ler</button>
<button onclick="startTimer()">â–¶ï¸ DÃ©marrer le chrono</button>
<button onclick="resetTimer()">ğŸ”„ Reset chrono</button>

<script>
/* ===== QR CODE (FIXE, FIABLE, AUCUN 404) ===== */
new QRCode(document.getElementById("qrcode"), {
  text: window.location.origin + window.location.pathname.replace("animateur.html","joueurs.html"),
  width:160,
  height:160
});

/* ===== JEU ===== */
let current = null;
let time = 30;
let interval = null;

function nextFilm() {
  if (!films || films.length === 0) return;
  current = films[Math.floor(Math.random() * films.length)];
  document.getElementById("emojis").innerText = current.emojis;
  document.getElementById("answer").innerText = current.title;
  document.getElementById("answer").style.display = "none";
  resetTimer();
}

function reveal() {
  if (!current) return;
  document.getElementById("answer").style.display = "block";
}

/* ===== CHRONO ===== */
function startTimer() {
  clearInterval(interval);
  time = 30;
  updateTimer();

  interval = setInterval(() => {
    time--;
    updateTimer();
    if (time <= 0) {
      clearInterval(interval);
      document.getElementById("timer").innerText = "â±ï¸ Temps Ã©coulÃ©";
    }
  }, 1000);
}

function resetTimer() {
  clearInterval(interval);
  time = 30;
  updateTimer();
}

function updateTimer() {
  document.getElementById("timer").innerText = "â±ï¸ " + time;
}
</script>

</body>
</html>
